import{u as d,a as u,U as l,j as s,f as x,B as p,b as j,L as h}from"./index-5bce78cb.js";import{F as f}from"./FormHeader-7f606b59.js";import{A as I}from"./AccountIconSelect-d72b0863.js";import{F as r}from"./index-cdfdc75e.js";import{I as m}from"./index-4b2128c5.js";import{C}from"./index-669ebd36.js";import"./index-f15d770f.js";import"./useMergedState-bafc2ea4.js";import"./KeyCode-6413d982.js";const S=({account:e})=>{const{useDelete:a,useUpdate:o}=d(),i=u(),t=o({id:e.id,onSuccess:()=>{i(l.SETTINGS.ACCOUNTS)}}),n=a({id:e.id,onSuccess:()=>{i(l.SETTINGS.ACCOUNTS)}});return s.jsxs("div",{children:[s.jsx(f,{text:"Редактирование счета",onDeleteButtonClick:()=>{confirm("Удалить счет? При наличии транзакций он будет помечен как неактивный")&&n.mutate()}}),s.jsxs(r,{name:"basic",labelCol:{span:8},layout:"vertical",wrapperCol:{span:16},initialValues:{initialValue:e.initialValue/100,isActive:e!=null&&e.id?e.isActive:!0,name:e!=null&&e.id?e.name:"",icon:e.icon},onFinish:c=>{t.mutate(c),i(l.SETTINGS.ACCOUNTS)},autoComplete:"off",children:[s.jsx(r.Item,{label:"Название",name:"name",rules:[{message:"Введите название счета",required:!0}],children:s.jsx(m,{})}),s.jsx(r.Item,{label:"Иконка",name:"icon",children:s.jsx(I,{})}),s.jsx(r.Item,{label:"Начальный остаток",name:"initialValue",rules:[{message:"Укажите начальный остаток",required:!0}],children:s.jsx(m,{})}),s.jsx(r.Item,{name:"isActive",valuePropName:"checked",children:s.jsx(C,{children:"Активен"})}),s.jsxs("span",{style:{marginLeft:10},children:["Остаток: ",x(e.rest)]}),s.jsx(r.Item,{wrapperCol:{offset:8,span:16},children:s.jsx(p,{type:"primary",htmlType:"submit",disabled:t.isLoading,children:"Сохранить"})})]}),t.isLoading&&s.jsx("div",{children:"Сохранение данных..."})]})},U=()=>{const e=j(),a=e!=null&&e.accountId?e==null?void 0:e.accountId:"",{useGetOne:o}=d(),{isFetching:i,isError:t,data:n}=o(a);return s.jsxs(s.Fragment,{children:[i&&s.jsx(h,{}),t&&!i&&s.jsx("div",{children:"Ошибка загрузки счета"}),!i&&!t&&n&&s.jsx(S,{account:n})]})};export{U as AccountPage,U as default};
